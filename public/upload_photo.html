<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GrowthTrack - Upload Photo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/upload_photo.css" />
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">ðŸŒ± GrowthTrack</a>
    </div>
  </nav>

  <div class="container-custom">
    <h1 class="text-center mb-5">ðŸ“¸ Prendre une Photo</h1>

    <div class="alert alert-info">
      <h5>Comment prendre une bonne photo :</h5>
      <ul>
        <li>Enfant debout contre un mur</li>
        <li>Feuille A4 visible Ã  cÃ´tÃ©</li>
        <li>Photo bien droite</li>
        <li>Bon Ã©clairage</li>
      </ul>
    </div>

    <!-- Upload -->
    <div class="card">
      <div class="card-body text-center">
        <h5>Choisir une Photo</h5>

        <input type="file" id="photoInput" accept="image/*" class="form-control mb-3" />
        <!--accepte n'autirise l'accÃ¨s q'aux images, tout autre fichier est bloquÃ©-->

        <img id="imagePreview" />

        <!-- Message -->
        <div id="message" class="mt-3"></div>
      </div>
    </div>

    <!-- Navigation -->
    <div class="mt-4 text-center">
      <a href="index.html" class="btn btn-secondary me-2">Retour</a>
      <button id="nextBtn" class="btn btn-primary" disabled>Suivant</button>
    </div>
  </div>

  <script>
    // Code JavaScript SIMPLIFIÃ‰
    const photoInput = document.getElementById("photoInput");
    const imagePreview = document.getElementById("imagePreview");
    const nextBtn = document.getElementById("nextBtn");
    const messageDiv = document.getElementById("message");

    // Quand on choisit un fichier
    photoInput.addEventListener("change", function (e) {
      const file = e.target.files[0];

      if (file && file.type.startsWith("image/")) {
        const reader = new FileReader();

        reader.onload = function (e) {
          // Affiche l'image directement
          imagePreview.src = e.target.result;
          imagePreview.style.display = "block";

          // Active le bouton
          nextBtn.disabled = false;
          messageDiv.innerHTML =
            '<div class="alert alert-success">Photo prÃªte !</div>';
        };

        reader.readAsDataURL(file);
      } else {
        messageDiv.innerHTML =
          '<div class="alert alert-danger">Choisissez une image valide</div>';
      }
    });

    // Bouton suivant
    nextBtn.addEventListener("click", function () {
      if (imagePreview.style.display !== "none") {
        // Sauvegarde simple
        localStorage.setItem("photo", imagePreview.src);
        window.location.href = "measure.html";
      }
    });
  </script>
  <!--
    e:rapport complet de l'Ã©vÃ¨nement: contient toutes les informations sur ce qui s'est passÃ©: quel Ã©lÃ©ment a Ã©tÃ© cliquÃ©,quelle heure Ã©tait, les fichiers sÃ©lÃ©ctionnÃ©s,..
    target:cible de l'Ã©vÃ¨nement: exp:1er exp: input de fichier
    files:liste des fichiers choisis
    new FileReader():objet, usine
    reader.onload: lecture achevÃ©e
    .style: le style css
    .style.display:comment l'Ã©lÃ©ment s'affiche
    'block': visible comme un bloc
    .disabled=false: change l'Ã©tat de bouton
    .innerHTML: remplacer le contenu d'un html (ici on remplace messageDiv)
    .readAsDataURL:machine de l'usine capable de convertir les fichiers en formats utilisables par le navigateur we
    localStorage.setItem('photo', imagePreview.src):
        localStorage:stockage local de navigateur
        .setItem: enregistrer un Ã©lÃ©ment
        'photo':le nom souslequel on sauvgarde
        imagePreview.src: url de l'image affichÃ©e
    window.location.href = 'measure.html':
        window:le fenetre de navigateur
        .location:emplacement actuel
    -->
</body>

</html>